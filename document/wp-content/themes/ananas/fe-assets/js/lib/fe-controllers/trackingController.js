"use strict";function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function asyncGeneratorStep(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}function _asyncToGenerator(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){function f(a){asyncGeneratorStep(h,d,e,f,g,"next",a)}function g(a){asyncGeneratorStep(h,d,e,f,g,"throw",a)}var h=a.apply(b,c);f(void 0)})}}var fbTrackingViewDetail,fbTrackingAddToCart,fbTrackingInitiateCheckoutOrPurchase,ggTrackingImpressions,ggTrackingAddToCart,ggTrackingViewCart,ggTrackingPurchase,ggTrackingViewDetail,ggTrackingRemove,ggTrackingCheckOutStep,STEP_YOUR_CART=1,STEP_SHIPPING_INFORMATION=2,STEP_ORDER_COMPLETED=3;(function(a,b){function c(){var b=getValueByElement(a("input.productName")),c=getValueByElement(a("input.productColor")),d=getValueByElement(a("input.productSku")),e=getValueByElement(a("input.productPrice")),f=getValueByElement(a("input.productCategory"));return{name:b,color:c,sku:d,price:e,category:f}}function d(a){var b=0,c=a.map(function(a){var c=reParseQuantity(a.quantity),d=replacePrice(a.price);return b+=c*d,toProductObject(a)});return{price:b,products:c}}// Tracking with Facebook
function e(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:"ViewContent",b=1<arguments.length?arguments[1]:void 0,c=b.name,d=b.color,e=b.sku,f=b.price,g=b.category,h=b.type,i=b.currency,j=b.size,k=b.quantity,l=b.contents;g||(g="Shoes > Basas"),h||(h="product"),i||(i="VND"),f=replacePrice(f),k=reParseQuantity(k);var m={};switch(a){case"ViewContent":{m={content_name:c,product_color:d,content_category:g,content_ids:[e],content_type:h,value:f,currency:i};break}case"AddToCart":{m={content_name:c,product_color:d,content_category:g,content_ids:[e],size:j,number_items:k,content_type:h,value:f,currency:i};break}case"Purchase":case"InitiateCheckout":{m={value:f,currency:i,contents:l,content_type:h};break}default:}fbq("track",a,m)}// Tracking View Detail
// Tracking with Gogole
function f(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null,b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,c={currencyCode:"VND"};c=_objectSpread(_objectSpread({},c),a),dataLayer.push({event:b,ecommerce:c})}// Tracking when addCart
// Tracking when load page your cart
// When click to checkout
fbTrackingViewDetail=function(){var b=returnBooleanByExistElement(a(".isProductDetailPage"));if(b){var d=c(),f=d.name,g=d.color,h=d.sku,i=d.price,j=d.category;e("ViewContent",{name:f,color:g,sku:h,price:i,category:j,type:"product",currency:"VND"})}},fbTrackingAddToCart=function(a){e("AddToCart",a)},fbTrackingInitiateCheckoutOrPurchase=/*#__PURE__*/function(){var b=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function b(){var c,f,g,h,i,j,k,l,m;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(c=returnBooleanByExistElement(a(".isYourCart")),f=returnBooleanByExistElement(a(".isCompletePage")),!(c||f)){b.next=22;break}if(g={},h="",!c){b.next=12;break}return h="InitiateCheckout",b.next=9,ajaxGetProductFromCart();case 9:g=b.sent,b.next=18;break;case 12:return i=a(".order-id").text(),h="Purchase",b.next=16,ajaxGetOrderByCode(i);case 16:j=b.sent,g=j.products;case 18:k=d(g),l=k.products.map(function(a){return toProductObject(a)}),m={price:k.price,contents:l},e(h,m);case 22:case"end":return b.stop();}},b)}));return function(){return b.apply(this,arguments)}}(),ggTrackingImpressions=/*#__PURE__*/function(){var b=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function b(){var c,d,e,g,h,i,j,k,l,m,n=arguments;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(c=0<n.length&&void 0!==n[0]?n[0]:null,d=!!(1<n.length&&void 0!==n[1])&&n[1],e=[],g=returnBooleanByExistElement(a(".isProductDetailPage")),!g){b.next=15;break}return h=[],a("input.referenceId").each(function(b,c){h.push(a(c).val())}),a("input.seenId").each(function(b,c){h.push(a(c).val())}),h.push(a(".productDetailId").val()),i=h.join(","),j={action:"ajaxGetProductsDetail",ids:i},b.next=13,callAjax("POST",j,!1);case 13:k=b.sent,e=k.map(function(a){var b=toProductObject(a);return{name:b.name,price:b.price,brand:"Ananas",category:b.category,variant:b.color,id:b.sku}});case 15:c&&d&&(e=c.map(function(a){return{name:a.productName,price:replacePrice(a.productPrice),brand:"Ananas",category:a.category,variant:a.productColor,id:a.productSKU}})),e&&e.length&&(l="impressions",m={impressions:e},f(m));case 17:case"end":return b.stop();}},b)}));return function(){return b.apply(this,arguments)}}(),ggTrackingAddToCart=function(a){f({add:{products:[a]}},"addToCart")},ggTrackingViewCart=/*#__PURE__*/function(){var b=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function b(){var c,e,g,h,i;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(c=returnBooleanByExistElement(a(".isYourCart")),!c){b.next=7;break}return e="checkout",b.next=5,ajaxGetProductFromCart();case 5:g=b.sent,g&&g.length&&(h=d(g),i={checkout:{viewCart:{step:1},products:h.products}},f(i,e));case 7:case"end":return b.stop();}},b)}));return function(){return b.apply(this,arguments)}}(),ggTrackingPurchase=/*#__PURE__*/function(){var b=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function b(){var c,e,g,h,i,j;return regeneratorRuntime.wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(c=returnBooleanByExistElement(a(".isCompletePage")),!c){b.next=10;break}return e=a(".order-id").text(),b.next=5,ajaxGetOrderByCode(e);case 5:g=b.sent,h="purchased",i=d(g.products),j={purchase:{actionField:{id:g.ID,revenue:replacePrice(g.totalPayment),shipping:replacePrice(g.shippingFee),coupon:""},products:i.products}},f(j,h);case 10:case"end":return b.stop();}},b)}));return function(){return b.apply(this,arguments)}}(),ggTrackingViewDetail=function(){var b=returnBooleanByExistElement(a(".isProductDetailPage"));if(b){var d=c(),e=d.name,g=d.color,h=d.sku,i=d.price,j=d.category;f({detail:{actionField:{list:j},products:{name:e,id:h,price:i,brand:"Ananas",category:j,variant:g}}})}},ggTrackingRemove=/*#__PURE__*/function(){var a=_asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function a(){var b,c,d,e,g,h,i,j,k,l,m=arguments;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b=!!(0<m.length&&void 0!==m[0])&&m[0],c=1<m.length&&void 0!==m[1]?m[1]:[],d=2<m.length&&void 0!==m[2]?m[2]:[],e=[],!b){a.next=10;break}return a.next=7,ajaxGetProductFromCart();case 7:e=a.sent,a.next=16;break;case 10:return g=c.join(","),h=d.join(","),i={action:"ajaxGetProductsDetail",ids:g,quantities:h},a.next=15,callAjax("POST",i,!1);case 15:e=a.sent;case 16:e&&e.length&&(j="removeFromCart",k=e.map(function(a){var b=toProductObject(a);return{name:b.name,price:b.price,brand:"Ananas",category:b.category,variant:b.color,id:b.sku,quantity:b.quantity}}),l={remove:{products:k}},f(l,j));case 17:case"end":return a.stop();}},a)}));return function(){return a.apply(this,arguments)}}(),ggTrackingCheckOutStep=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:STEP_YOUR_CART,b="your-cart";switch(a){case STEP_SHIPPING_INFORMATION:{b="shipping-information";break}case STEP_ORDER_COMPLETED:{b="order-completed";break}default:}var c={checkout_option:{actionField:{step:a,option:b}}};console.log(c),f(c,"checkoutOption")},a(".mini-cart-checkout").click(function(){ggTrackingCheckOutStep(STEP_YOUR_CART)}),a(b).load(function(){// Facebook Tracking
// Google Tracking
fbTrackingViewDetail(),fbTrackingInitiateCheckoutOrPurchase(),ggTrackingImpressions(),ggTrackingPurchase(),ggTrackingViewDetail(),ggTrackingViewCart()})})(jQuery,window);